!function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var o="function"==typeof require&&require;if(!u&&o)return o(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";!function(){var e={init:function(){var t=this;this.dataPromises=[],this.nestBy=["category","series"];return["Sheet1","dictionary"].forEach(function(n,r){var i=new Promise(function(i,a){d3.json("https://sheets.googleapis.com/v4/spreadsheets/1_G9HsJbxRBd7fWTF51Xr8lpxGxxImVcc-rTIaQbEeyA/values/"+n+"?key=AIzaSyDD3W5wJeJF2esffZMQxNtEl9tt-OfgSq4",function(s,u){if(s)throw a(s),s;var o=u.values,c="dictionary"===n?"object":"series";i(t.returnKeyValues(o,e.nestBy,!0,c,r))})});t.dataPromises.push(i)}),Promise.all([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.dataPromises)))},summarizeData:function(){function e(e){return t.reduce(function(t,n){return t[n]={max:d3.max(e,function(e){return e[n]}),min:d3.min(e,function(e){return e[n]}),mean:d3.mean(e,function(e){return e[n]})},t},{})}this.summaries=[];for(var t=Object.keys(this.unnested[0]),n=Array.isArray(this.nestBy)?this.nestBy:[this.nestBy];n.length>0;){var r=this.nestPrelim(n).rollup(e).object(this.unnested);this.summaries.unshift(r),n.pop()}},nestPrelim:function(e){return e.reduce(function(e,t){if("string"!=typeof t&&"function"!=typeof t)throw"each nestBy item must be a string or function";var n;return"string"==typeof t&&(n=e.key(function(e){return e[t]})),"function"==typeof t&&(n=e.key(function(e){return t(e)})),n},d3.nest())},returnKeyValues:function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"series",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=t.slice(1).map(function(e){return e.reduce(function(e,n,r){return e[t[0][r]]=!0===i?isNaN(+n)||""===n?n:+n:n,e},{})});if(0===s&&(e.unnested=u),!n)return u;if("string"==typeof n||"function"==typeof n)r=e.nestPrelim([n]);else{if(!Array.isArray(n))throw"nestBy variable must be a string, function, or array of strings or functions";r=e.nestPrelim(n)}return"object"===a?r.object(u):r.entries(u)}},t={init:function(){this.margins={top:20,right:15,bottom:15,left:35},this.activeField="pb25l",this.setupCharts()},label:function(t){return e.dictionary.find(function(e){return e.key===t}).label},setupCharts:function(){d3.selectAll(".d3-chart").each(function(){var n=this.dataset,r=n.resetScale?JSON.parse(n.resetScale):"none",i=0,a=0,s=+n.marginTop||t.margins.top,u=+n.marginRight||t.margins.right,o=+n.marginBottom||t.margins.bottom,c=+n.marginLeft||t.margins.left;!n.marginRight&&n.directLabel&&(u=45);var l=n.eachWidth-c-u,f=n.eachHeight?n.eachHeight-s-o:n.eachWidth/2-s-o,d=e.data.find(function(e){return e.key===n.category}),m=d3.select(this).datum(d),h=e.summaries[0][d.key][t.activeField+"_value"].min<0?e.summaries[0][d.key][t.activeField+"_value"].min:0,p=e.summaries[0][d.key][t.activeField+"_value"].max>Math.abs(h/2)?e.summaries[0][d.key][t.activeField+"_value"].max:Math.abs(h/2),y=d3.timeParse("%Y"),v=d3.scaleTime().range([0,l]).domain([y(2015),y(2045)]),g=d3.scaleLinear().range([f,0]).domain([h,p]);m.append("p").html(function(e){return"<strong>"+t.label(e.key)+"</strong>"});var x;x=m.append("div").attr("class","flex").selectAll("SVGs").data(function(e,t,r){return function(e){var t,r=n.seriesGroup?JSON.parse(n.seriesGroup):"none";if(Array.isArray(r))t=[],JSON.parse(n.seriesGroup).forEach(function(n){t.push(e.filter(function(e){return-1!==n.indexOf(e.key)}))});else if("none"===r)t=e.map(function(e){return[e]});else{if("all"!==r)throw"Invalid data-group-series unstruction from html";t=[e.map(function(e){return e})]}return t}(e.values)}).enter().append("svg").attr("width",n.eachWidth).attr("height",f+s+o).append("g").attr("transform","translate("+c+","+s+")");var k=d3.line().x(function(e){return v(y(e.year))}).y(function(e){return g(e[t.activeField+"_value"])});x.each(function(u,o,m){function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];d3.select(this).append("g").attr("class",function(){return"axis y-axis "+e}).call(d3.axisLeft(g).tickSizeInner(4).tickSizeOuter(0).tickPadding(1).ticks(5)),t&&d3.select(this).append("text").attr("class","units").attr("transform",function(){return"translate(-"+c+",-"+(s-10)+")"}).text(function(){return function(e){return e.replace(/_/g," ")}(b)})}var b,A=this,F=d3.select(this),_=F.data();F.selectAll("series-groups").data(_).enter().append("g").selectAll("series").data(function(e){return e}).enter().append("path").attr("class",function(){return"line line-"+i++}).attr("d",function(n,i){return b=n.values[1].units,-1!==r.indexOf(n.key)?(h=e.summaries[1][d.key][n.key][t.activeField+"_value"].min<0?e.summaries[1][d.key][n.key][t.activeField+"_value"].min:0,p=e.summaries[1][d.key][n.key][t.activeField+"_value"].max>Math.abs(h/2)?e.summaries[1][d.key][n.key][t.activeField+"_value"].max:Math.abs(h/2),v=d3.scaleTime().range([0,l]).domain([y(2015),y(2045)]),g=d3.scaleLinear().range([f,0]).domain([h,p]),0!==o&&0===i&&x.call(A,"",!0)):0!==o&&0===i&&x.call(A,"repeated"),n.values.unshift(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({year:2015},t.activeField+"_value",0)),k(n.values)}).each(function(e){n.directLabel&&F.append("text").attr("class",function(){return"series-label series-"+a++}).html(function(){return'<tspan x="0">'+t.label(e.key).replace(/\\n/g,'</tspan><tspan x="0" dy="1.2em">')+"</tspan>"}).attr("transform",function(){return"translate("+(l+3)+","+(g(e.values[e.values.length-1][t.activeField+"_value"])+3)+")"})}),F.append("g").attr("transform","translate(0,"+g(0)+")").attr("class","axis x-axis").call(d3.axisBottom(v).tickSizeInner(4).tickSizeOuter(0).tickPadding(1).tickValues([y(2025),y(2035),y(2045)])),0===o&&x.call(this,"",!0)})})}};(function(){e.init().then(function(n){e.data=n[0],e.dictionary=n[1].undefined.undefined,e.summarizeData(),t.init()})})()}()},{}]},{},[1]);